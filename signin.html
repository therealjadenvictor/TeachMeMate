<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In - TeachMeMate</title>
  <link rel="stylesheet" href="styles.css">

  <style>
    .auth-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 100vh;
      gap: 2rem;
    }

    .auth-left {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(183, 75, 255, 0.1));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .auth-right {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .auth-form {
      width: 100%;
      max-width: 400px;
    }
    .auth-form input {
  width: 100%;
  padding: 12px 14px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 1rem;
  box-sizing: border-box;
}

    .auth-title {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    .auth-subtitle {
      text-align: center;
      margin-bottom: 2rem;
    }

    .form-link {
      text-align: center;
      margin-top: 1.5rem;
    }
  </style>
</head>

<body>

  <div class="auth-container">

    <!-- Left Section -->
    <div class="auth-left">
      <div class="auth-text">
        <h2>Welcome Back ðŸš€</h2>
        <p>Sign in to continue your journey.</p>
      </div>
    </div>
    
    <style>
    .auth-left{
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
    }
    
    /* MAIN TITLE */
    .auth-text h2{
      font-size:4rem;
      font-weight:800;
      font-family:'Poppins','Segoe UI',sans-serif;
      letter-spacing:-1px;
      color:#ffffff;
      text-shadow:0 0 25px rgba(255,255,255,0.35);
      margin-bottom:1rem;
    }
    
    /* SUBTITLE */
    .auth-text p{
      transform: translateX(-20px);
      font-size:1.6rem;
      font-weight:500;
      font-family:'Inter','Segoe UI',sans-serif;
      opacity:0.85;
      letter-spacing:0.5px;
    }
    </style>
    

    <!-- Right Section -->
    <div class="auth-right">
      <div class="auth-form">

        <h3 class="auth-title">Sign In</h3>
        <p class="auth-subtitle">Welcome back to TeachMeMate</p>

        <!-- IMPORTANT: Added ID -->
        <form id="loginForm">

          <div>
            <label>Email Address</label><br>
            <input type="email" id="email" placeholder="your@email.com" required>
          </div>

          <br>

          <div>
            <label>Password</label><br>
            <input type="password" id="password" placeholder="Enter your password" required>
          </div>

          <br>

          <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">
           Sign In
         </button>


        </form>

        <div class="form-link">
          Don't have an account? <a href="signup.html">Sign Up</a>
        </div>

      </div>
    </div>

  </div>


  
 <script type="module">
import { auth, db } from "./firebase-config.js";
import { signInWithEmailAndPassword }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { doc, getDoc }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// FORM
const form = document.getElementById("loginForm");

// ðŸ”¥ MAIN LOGIN LOGIC
form.addEventListener("submit", async (e) => {
  e.preventDefault(); 

  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;

    console.log("Logged in:", user.uid);

    // ðŸ”¥ CHECK IF PROFILE EXISTS
    const docRef = doc(db, "users", user.uid);
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      console.log("User already has profile â†’ Dashboard");
      window.location.href = "dashboard.html";
    } else {
      console.log("New user â†’ Profile page");
      window.location.href = "profile.html";
    }

  } catch (error) {
    console.error(error);
    alert(error.message);
  }
});
</script>

