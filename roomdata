import {
  collection,
  addDoc,
  serverTimestamp
} from "firebase/firestore";
import { db, auth } from "./firebase-config.js";

function generateRoomName() {
  return "tm-" + Math.random().toString(36).substring(2, 8);
}

async function createRoom(studentUid) {
  const teacherUid = auth.currentUser.uid;

  const roomName = generateRoomName();

  await addDoc(collection(db, "rooms"), {
    roomName,
    user1: teacherUid,
    user2: studentUid,
    status: "active",
    createdAt: serverTimestamp()
  });

  return roomName;
}
